# å‰ç«¯é”™è¯¯è¯¦ç»†è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

ç»è¿‡ä»£ç å®¡æŸ¥ï¼Œå‘ç°ä»¥ä¸‹æ½œåœ¨é—®é¢˜ï¼š

1. **ä¸»é¢˜åˆ‡æ¢å™¨å…¼å®¹æ€§é—®é¢˜** - ä½¿ç”¨äº†View Transitions APIï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰
2. **Tailwindé…ç½®é‡å¤å®šä¹‰** - å¯¼è‡´é…ç½®å†²çª
3. **é¢œè‰²ç±»æœªå®šä¹‰** - éƒ¨åˆ†ç»„ä»¶ä½¿ç”¨äº†ä¸å­˜åœ¨çš„Tailwindç±»
4. **ä¸»é¢˜åˆå§‹åŒ–é—ªçƒ** - SSR/CSRä¸»é¢˜åˆ‡æ¢æ—¶å¯èƒ½å‡ºç°é—ªçƒ
5. **glassæ•ˆæœç±»æœªåœ¨Tailwindä¸­å®šä¹‰** - ä½¿ç”¨äº†bg-glassç­‰æœªæ³¨å†Œçš„è‡ªå®šä¹‰ç±»

---

## ğŸ”´ ä¸¥é‡é”™è¯¯ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

### 1. View Transitions APIå…¼å®¹æ€§é—®é¢˜

**æ–‡ä»¶ä½ç½®**: `frontend/src/components/ui/animated-theme-toggler.tsx`

**é—®é¢˜æè¿°**:
ä½¿ç”¨äº†`document.startViewTransition`ï¼Œè¿™æ˜¯æµè§ˆå™¨çš„å®éªŒæ€§APIï¼Œå¯èƒ½ä¸è¢«æ‰€æœ‰æµè§ˆå™¨æ”¯æŒã€‚

**é”™è¯¯å½±å“**:
- Chrome 111+æ”¯æŒ
- Safariã€Firefoxéƒ¨åˆ†ç‰ˆæœ¬å¯èƒ½ä¸æ”¯æŒ
- ä¸»é¢˜åˆ‡æ¢å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:

```typescript
// animated-theme-toggler.tsx - ä¿®å¤View Transitionså…¼å®¹æ€§

'use client';

import { useCallback, useEffect, useRef, useState } from 'react';
import { Moon, Sun } from 'lucide-react';
import { cn } from '@/lib/utils';
import { useTheme } from '@/context/theme-context';

interface AnimatedThemeTogglerProps extends React.ComponentPropsWithoutRef<'button'> {
  duration?: number;
}

// æ£€æµ‹View Transitions APIæ”¯æŒ
const hasViewTransitionSupport = typeof document !== 'undefined' && 
  'startViewTransition' in document;

export const AnimatedThemeToggler = ({
  className,
  duration = 400,
  ...props
}: AnimatedThemeTogglerProps) => {
  const { theme, setTheme } = useTheme();
  const [isDark, setIsDark] = useState(false);
  const buttonRef = useRef<HTMLButtonElement>(null);
  
  useEffect(() => {
    // åˆå§‹åŒ–æ—¶åŒæ­¥ä¸»é¢˜çŠ¶æ€
    setIsDark(theme === 'dark' || (theme === 'auto' && typeof window !== 'undefined' && window.matchMedia('(prefers-color-scheme: dark)').matches));
  }, [theme]);
  
  useEffect(() => {
    const updateTheme = () => {
      if (typeof document !== 'undefined') {
        setIsDark(document.documentElement.classList.contains('dark'));
      }
    };
    
    updateTheme();
    
    if (typeof MutationObserver !== 'undefined') {
      const observer = new MutationObserver(updateTheme);
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class'],
      });
      
      return () => observer.disconnect();
    }
  }, []);
  
  const toggleTheme = useCallback(async () => {
    if (!buttonRef.current || typeof document === 'undefined') return;
    
    // è·å–å½“å‰ä¸»é¢˜çŠ¶æ€
    const currentIsDark = document.documentElement.classList.contains('dark');
    const newTheme = currentIsDark ? 'light' : 'dark';
    
    // ä¿å­˜åˆ°localStorage
    if (typeof window !== 'undefined') {
      localStorage.setItem('theme', newTheme);
    }
    
    // å¦‚æœæ”¯æŒView Transitions APIï¼Œä½¿ç”¨åŠ¨ç”»åˆ‡æ¢
    if (hasViewTransitionSupport) {
      await document.startViewTransition(() => {
        setTheme(newTheme);
      }).ready;
      
      const { top, left, width, height } = buttonRef.current.getBoundingClientRect();
      const x = left + width / 2;
      const y = top + height / 2;
      const maxRadius = Math.hypot(
        Math.max(left, window.innerWidth - left),
        Math.max(top, window.innerHeight - top)
      );
      
      document.documentElement.animate(
        {
          clipPath: [
            `circle(0px at ${x}px ${y}px)`,
            `circle(${maxRadius}px at ${x}px ${y}px)`,
          ],
        },
        {
          duration,
          easing: 'ease-in-out',
          pseudoElement: '::view-transition-new(root)',
        }
      );
    } else {
      // ä¸æ”¯æŒçš„æµè§ˆå™¨ï¼Œç›´æ¥åˆ‡æ¢ä¸»é¢˜
      setTheme(newTheme);
      
      // ä½¿ç”¨CSSåŠ¨ç”»ä½œä¸ºfallback
      document.documentElement.animate(
        [
          { opacity: 0.8 },
          { opacity: 1 },
        ],
        {
          duration: 200,
          easing: 'ease-out',
        }
      );
    }
  }, [setTheme, duration]);
  
  return (
    <button
      ref={buttonRef}
      onClick={toggleTheme}
      className={cn('p-2 rounded-md hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50', className)}
      aria-label="åˆ‡æ¢ä¸»é¢˜"
      {...props}
    >
      {isDark ? <Sun className="h-5 w-5" /> : <Moon className="h-5 w-5" />}
    </button>
  );
};
```

---

### 2. Tailwindé…ç½®é‡å¤å®šä¹‰

**æ–‡ä»¶ä½ç½®**: `frontend/tailwind.config.js`

**é—®é¢˜æè¿°**:
`animation`å’Œ`keyframes`è¢«é‡å¤å®šä¹‰äº†3æ¬¡ï¼Œå¯èƒ½å¯¼è‡´é…ç½®å†²çªã€‚

**è§£å†³æ–¹æ¡ˆ**:

```javascript
// tailwind.config.js - æ¸…ç†é‡å¤å®šä¹‰

/** @type {import('tailwindcss').Config} */
export default {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
    './src/lib/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  darkMode: ['class', '.dark'],
  theme: {
    extend: {
      colors: {
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        ring: 'hsl(var(--ring))',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        primary: {
          DEFAULT: 'hsl(var(--primary))',
          foreground: 'hsl(var(--primary-foreground))',
          50: '#eff6ff',
          100: '#dbeafe',
          200: '#bfdbfe',
          300: '#93c5fd',
          400: '#60a5fa',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          800: '#1e40af',
          900: '#1e3a8a',
        },
        secondary: {
          DEFAULT: 'hsl(var(--secondary))',
          foreground: 'hsl(var(--secondary-foreground))',
          50: '#f8fafc',
          100: '#f1f5f9',
          200: '#e2e8f0',
          300: '#cbd5e1',
          400: '#94a3b8',
          500: '#64748b',
          600: '#475569',
          700: '#334155',
          800: '#1e293b',
          900: '#0f172a',
        },
        destructive: {
          DEFAULT: 'hsl(var(--destructive))',
          foreground: 'hsl(var(--destructive-foreground))',
        },
        glass: {
          DEFAULT: 'rgba(15, 23, 42, 0.5)',
          light: 'rgba(255, 255, 255, 0.1)',
          border: 'rgba(34, 211, 238, 0.15)',
          glow: 'rgba(6, 182, 212, 0.2)',
        },
        tech: {
          darkblue: '#0f172a',
          deepblue: '#1e3a8a',
          cyan: '#06b6d4',
          lightcyan: '#22d3ee',
          sky: '#0ea5e9',
        },
        muted: {
          DEFAULT: 'hsl(var(--muted))',
          foreground: 'hsl(var(--muted-foreground))',
        },
        accent: {
          DEFAULT: 'hsl(var(--accent))',
          foreground: 'hsl(var(--accent-foreground))',
        },
        popover: {
          DEFAULT: 'hsl(var(--popover))',
          foreground: 'hsl(var(--popover-foreground))',
        },
        card: {
          DEFAULT: 'hsl(var(--card))',
          foreground: 'hsl(var(--card-foreground))',
        },
      },
      borderRadius: {
        lg: 'var(--radius)',
        md: 'calc(var(--radius) - 2px)',
        sm: 'calc(var(--radius) - 4px)',
      },
      // ç»Ÿä¸€å®šä¹‰keyframesï¼ˆåªä¿ç•™ä¸€æ¬¡ï¼‰
      keyframes: {
        'accordion-down': {
          from: { height: 0 },
          to: { height: 'var(--radix-accordion-content-height)' },
        },
        'accordion-up': {
          from: { height: 'var(--radix-accordion-content-height)' },
          to: { height: 0 },
        },
        'glass-float': {
          '0%, 100%': { transform: 'translateY(0)' },
          '50%': { transform: 'translateY(-10px)' },
        },
        'pulse-glow': {
          '0%, 100%': { boxShadow: '0 0 15px rgba(6, 182, 212, 0.3)' },
          '50%': { boxShadow: '0 0 25px rgba(6, 182, 212, 0.6)' },
        },
        'gradient-move': {
          '0%': { backgroundPosition: '0% 50%' },
          '50%': { backgroundPosition: '100% 50%' },
          '100%': { backgroundPosition: '0% 50%' },
        },
        'fade-in-up': {
          '0%': { opacity: '0', transform: 'translateY(20px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
        'slide-in-left': {
          '0%': { opacity: '0', transform: 'translateX(-30px)' },
          '100%': { opacity: '1', transform: 'translateX(0)' },
        },
        'scale-fade-in': {
          '0%': { opacity: '0', transform: 'scale(0.95)' },
          '100%': { opacity: '1', transform: 'scale(1)' },
        },
        'ripple': {
          '0%': { transform: 'scale(0)', opacity: '1' },
          '100%': { transform: 'scale(4)', opacity: '0' },
        },
        'fade-in': {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        'fade-scale-up': {
          from: { opacity: 0, transform: 'translateY(30px) scale(0.95)' },
          to: { opacity: 1, transform: 'translateY(0) scale(1)' },
        },
        'float-improved': {
          '0%, 100%': { transform: 'translateY(0px) translateX(0px) scale(1)' },
          '25%': { transform: 'translateY(-15px) translateX(5px) scale(1.02)' },
          '50%': { transform: 'translateY(-20px) translateX(-5px) scale(1.05)' },
          '75%': { transform: 'translateY(-10px) translateX(3px) scale(1.02)' },
        },
        'glow-pulse': {
          '0%, 100%': { boxShadow: '0 0 20px rgba(6, 182, 212, 0.3), 0 0 40px rgba(6, 182, 212, 0.1)' },
          '50%': { boxShadow: '0 0 30px rgba(6, 182, 212, 0.5), 0 0 60px rgba(6, 182, 212, 0.2)' },
        },
        'slide-in-right': {
          from: { opacity: 0, transform: 'translateX(30px)' },
          to: { opacity: 1, transform: 'translateX(0)' },
        },
      },
      // ç»Ÿä¸€å®šä¹‰animationï¼ˆåªä¿ç•™ä¸€æ¬¡ï¼‰
      animation: {
        'accordion-down': 'accordion-down 0.2s ease-out',
        'accordion-up': 'accordion-up 0.2s ease-out',
        'glass-float': 'glass-float 6s ease-in-out infinite',
        'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
        'gradient-move': 'gradient-move 8s ease infinite',
        'fade-in-up': 'fade-in-up 0.6s ease-out forwards',
        'slide-in-left': 'slide-in-left 0.6s ease-out forwards',
        'scale-fade-in': 'scale-fade-in 0.5s ease-out forwards',
        'ripple': 'ripple 0.6s ease-out forwards',
        'fade-in': 'fade-in 0.6s ease-out forwards',
        'fade-scale-up': 'fade-scale-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
        'float-improved': 'float-improved 8s ease-in-out infinite',
        'glow-pulse': 'glow-pulse 3s ease-in-out infinite',
        'slide-in-right': 'slide-in-right 0.6s ease-out forwards',
        'spin-slow': 'spin 8s linear infinite',
      },
      transitionDelay: {
        '50': '50ms',
        '100': '100ms',
        '150': '150ms',
        '200': '200ms',
        '250': '250ms',
        '300': '300ms',
        '400': '400ms',
        '500': '500ms',
      },
    },
  },
  plugins: [],
};
```

---

### 3. æœªå®šä¹‰çš„glassé¢œè‰²ç±»

**é—®é¢˜æè¿°**:
å¤šä¸ªç»„ä»¶ä½¿ç”¨äº†`bg-glass`ã€`bg-glass/30`ç­‰ç±»ï¼Œä½†è¿™äº›ç±»æ²¡æœ‰åœ¨Tailwindé…ç½®ä¸­æ­£ç¡®å®šä¹‰ä¸ºèƒŒæ™¯è‰²ã€‚

**å½±å“æ–‡ä»¶**:
- `frontend/src/app/page.tsx`
- `frontend/src/components/navigation/Navbar.tsx`
- `frontend/src/components/ui/card.tsx`
- å…¶ä»–å¤šä¸ªç»„ä»¶

**è§£å†³æ–¹æ¡ˆ**:

åœ¨`tailwind.config.js`ä¸­æ­£ç¡®é…ç½®glassèƒŒæ™¯è‰²ï¼š

```javascript
// åœ¨tailwind.config.jsçš„colorsé…ç½®ä¸­æ·»åŠ 
colors: {
  // ... å…¶ä»–é¢œè‰²
  glass: {
    DEFAULT: 'rgba(15, 23, 42, 0.5)',      // é»˜è®¤50%é€æ˜åº¦
    light: 'rgba(255, 255, 255, 0.7)',      // æµ…è‰²æ¨¡å¼èƒŒæ™¯
    border: 'rgba(34, 211, 238, 0.15)',     // è¾¹æ¡†é¢œè‰²
    glow: 'rgba(6, 182, 212, 0.2)',         // å‘å…‰æ•ˆæœ
  },
  // ... å…¶ä»–é¢œè‰²
}
```

ç„¶ååœ¨`globals.css`ä¸­æ·»åŠ å·¥å…·ç±»ï¼ˆå·²æœ‰ï¼Œä½†éœ€ç¡®ä¿æ­£ç¡®ï¼‰ï¼š

```css
/* globals.css - ç¡®ä¿glassæ•ˆæœæ­£ç¡®åº”ç”¨ */

.glass {
  background-color: rgb(15 23 42 / 0.5); /* ä½¿ç”¨rgb()è¯­æ³•æ”¯æŒä»»æ„é€æ˜åº¦ */
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgb(34 211 238 / 0.15);
  border-radius: 1rem;
  transition: all 0.3s ease;
}

.dark .glass {
  background-color: rgb(15 23 42 / 0.5);
  border: 1px solid rgb(34 211 238 / 0.15);
}

.light .glass {
  background-color: rgb(255 255 255 / 0.7);
  border: 1px solid rgb(0 0 0 / 0.1);
}
```

---

### 4. ä¸»é¢˜åˆå§‹åŒ–é—ªçƒé—®é¢˜

**æ–‡ä»¶ä½ç½®**: `frontend/src/components/theme-wrapper.tsx`

**é—®é¢˜æè¿°**:
é¡µé¢åŠ è½½æ—¶å¯èƒ½å‡ºç°çŸ­æš‚çš„ç™½è‰²é—ªçƒï¼Œå› ä¸ºä¸»é¢˜æ˜¯åœ¨å®¢æˆ·ç«¯æŒ‚è½½åæ‰åº”ç”¨ã€‚

**è§£å†³æ–¹æ¡ˆ**:

```typescript
// theme-wrapper.tsx - ä¼˜åŒ–ä¸»é¢˜åˆå§‹åŒ–

'use client';

import { ThemeProvider } from '@/context/theme-context';
import { useState, useEffect } from 'react';

export default function ThemeWrapper({ children }: { children: React.ReactNode }) {
  const [isMounted, setIsMounted] = useState(false);

  useEffect(() => {
    setIsMounted(true);
  }, []);

  // æ”¹è¿›ï¼šæ·»åŠ è¿‡æ¸¡æ•ˆæœï¼Œä½¿é—ªçƒæ›´å¹³æ»‘
  return (
    <ThemeProvider>
      <div 
        className={`transition-opacity duration-300 ${
          !isMounted ? 'opacity-0' : 'opacity-100'
        }`}
      >
        {children}
      </div>
    </ThemeProvider>
  );
}
```

æˆ–è€…æ›´å¥½çš„æ–¹æ¡ˆï¼Œåœ¨æœåŠ¡ç«¯å°±åº”ç”¨ä¸»é¢˜ï¼š

```typescript
// theme-context.tsx - æ”¹è¿›ä¸»é¢˜ä¸Šä¸‹æ–‡

'use client';

import { createContext, useContext, useEffect, useState, ReactNode } from 'react';

type Theme = 'light' | 'dark' | 'auto';

interface ThemeContextType {
  theme: Theme;
  setTheme: (theme: Theme) => void;
  resolvedTheme: 'light' | 'dark';
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export function ThemeProvider({ 
  children, 
  defaultTheme = 'auto',
  storageKey = 'theme'
}: {
  children: ReactNode;
  defaultTheme?: Theme;
  storageKey?: string;
}) {
  const [theme, setTheme] = useState<Theme>(() => {
    if (typeof window !== 'undefined') {
      const stored = localStorage.getItem(storageKey);
      return stored ? (stored as Theme) : defaultTheme;
    }
    return defaultTheme;
  });

  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>('dark');

  // å¼ºåˆ¶æ›´æ–°ä¸»é¢˜çš„æ–¹æ³•
  const updateTheme = (newTheme: Theme) => {
    setTheme(newTheme);
    if (typeof window !== 'undefined') {
      localStorage.setItem(storageKey, newTheme);
    }
  };

  // è®¡ç®—å®é™…ä¸»é¢˜
  useEffect(() => {
    const root = window.document.documentElement;
    
    // ç§»é™¤æ—§çš„ä¸»é¢˜ç±»
    root.classList.remove('light', 'dark');
    
    let actualTheme: 'light' | 'dark';
    
    if (theme === 'auto') {
      // å¦‚æœæ˜¯è‡ªåŠ¨æ¨¡å¼ï¼Œæ ¹æ®ç³»ç»Ÿåå¥½å†³å®š
      actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    } else {
      actualTheme = theme;
    }
    
    // æ·»åŠ å¯¹åº”çš„ä¸»é¢˜ç±»
    root.classList.add(actualTheme);
    setResolvedTheme(actualTheme);
    
    // ä¿å­˜åˆ°localStorage
    if (typeof window !== 'undefined') {
      localStorage.setItem(storageKey, theme);
    }
  }, [theme, storageKey]);

  // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    
    const handleChange = () => {
      if (theme === 'auto') {
        const newTheme = mediaQuery.matches ? 'dark' : 'light';
        setResolvedTheme(newTheme);
        
        const root = window.document.documentElement;
        root.classList.remove('light', 'dark');
        root.classList.add(newTheme);
      }
    };
    
    mediaQuery.addEventListener('change', handleChange);
    
    return () => mediaQuery.removeEventListener('change', handleChange);
  }, [theme]);

  const value = {
    theme,
    setTheme: updateTheme,
    resolvedTheme
  };

  return (
    <ThemeContext.Provider value={value}>
      {children}
    </ThemeContext.Provider>
  );
}

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
};
```

---

## ğŸŸ¡ è­¦å‘Šé—®é¢˜ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

### 5. æœªä½¿ç”¨çš„flushSyncå¯¼å…¥

**æ–‡ä»¶ä½ç½®**: `frontend/src/components/ui/animated-theme-toggler.tsx:5`

**é—®é¢˜æè¿°**:
å¯¼å…¥äº†`flushSync`ä½†æœªä½¿ç”¨ã€‚

**è§£å†³æ–¹æ¡ˆ**:
ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥ï¼š

```typescript
// åˆ é™¤è¿™ä¸€è¡Œ
import { flushSync } from 'react-dom';
```

---

### 6. ThemeToggleç»„ä»¶å†—ä½™

**æ–‡ä»¶ä½ç½®**: `frontend/src/components/ui/theme-toggle.tsx`

**é—®é¢˜æè¿°**:
å­˜åœ¨`theme-toggle.tsx`å’Œ`animated-theme-toggler.tsx`ä¸¤ä¸ªä¸»é¢˜åˆ‡æ¢ç»„ä»¶ï¼Œé€ æˆæ··æ·†ã€‚

**å»ºè®®**:
- ä¿ç•™`AnimatedThemeToggler`ï¼ˆæ›´é«˜çº§ï¼Œå¸¦åŠ¨ç”»ï¼‰
- åˆ é™¤æˆ–åºŸå¼ƒ`theme-toggle.tsx`
- æ›´æ–°æ‰€æœ‰å¼•ç”¨

---

### 7. CSSå˜é‡æœªå®Œå…¨åˆ©ç”¨

**æ–‡ä»¶ä½ç½®**: `frontend/src/styles/globals.css`

**é—®é¢˜æè¿°**:
å®šä¹‰äº†CSSå˜é‡ï¼ˆ`--background`ã€`--foreground`ç­‰ï¼‰ï¼Œä½†éƒ¨åˆ†ç»„ä»¶ç›´æ¥ä½¿ç”¨ç¡¬ç¼–ç é¢œè‰²ã€‚

**å»ºè®®**:
ç»Ÿä¸€ä½¿ç”¨CSSå˜é‡ï¼š

```css
/* globals.css */

.dark {
  --glass-bg: rgba(15, 23, 42, 0.5);
  --glass-border: rgba(34, 211, 238, 0.15);
}

.light {
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(0, 0, 0, 0.1);
}

.glass {
  background-color: var(--glass-bg);
  border-color: var(--glass-border);
}
```

---

## ğŸŸ¢ ä¼˜åŒ–å»ºè®®ï¼ˆä½ä¼˜å…ˆçº§ï¼‰

### 8. æŒ‰é’®æ¶Ÿæ¼ªæ•ˆæœæ€§èƒ½ä¼˜åŒ–

**æ–‡ä»¶ä½ç½®**: `frontend/src/components/ui/button.tsx:51`

**å½“å‰å®ç°**:
æ¯ä¸ªæŒ‰é’®éƒ½æœ‰`ripple-effect`ç±»ï¼ŒCSSåŠ¨ç”»å›ºå®šè¿è¡Œã€‚

**ä¼˜åŒ–æ–¹æ¡ˆ**:
ä½¿ç”¨JavaScriptåŠ¨æ€è§¦å‘æ¶Ÿæ¼ªï¼š

```typescript
// button.tsx - ä¼˜åŒ–çš„æ¶Ÿæ¼ªæ•ˆæœ

'use client';

import * as React from 'react';
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const buttonVariants = cva(
  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative overflow-hidden',
  {
    variants: {
      variant: {
        default: 'bg-primary text-primary-foreground hover:bg-primary/90',
        destructive:
          'bg-destructive text-destructive-foreground hover:bg-destructive/90',
        outline:
          'border border-input bg-background hover:bg-accent hover:text-accent-foreground',
        secondary:
          'bg-secondary text-secondary-foreground hover:bg-secondary/80',
        ghost: 'hover:bg-accent hover:text-accent-foreground',
        link: 'text-primary underline-offset-4 hover:underline',
        glass: 'bg-glass text-white border border-glass-border hover:bg-glass/80 hover:border-glass-border/40',
        'glass-light': 'bg-glass-light text-gray-900 border border-glass-light-border hover:bg-glass-light/80 hover:border-glass-light-border/40',
      },
      size: {
        default: 'h-10 px-4 py-2',
        sm: 'h-9 rounded-md px-3',
        lg: 'h-11 rounded-md px-8',
        icon: 'h-10 w-10',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  }
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, children, onClick, ...props }, ref) => {
    const Comp = asChild ? Slot : 'button';
    
    // æ¶Ÿæ¼ªæ•ˆæœå¤„ç†
    const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
      if (onClick) onClick(e);
      
      const button = e.currentTarget;
      const rect = button.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      const ripple = document.createElement('span');
      ripple.style.cssText = `
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: scale(0);
        animation: ripple 0.6s ease-out;
        pointer-events: none;
        left: ${x}px;
        top: ${y}px;
        width: 100px;
        height: 100px;
        margin-left: -50px;
        margin-top: -50px;
      `;
      
      button.appendChild(ripple);
      
      setTimeout(() => ripple.remove(), 600);
    };
    
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={asChild ? undefined : ref}
        onClick={handleClick}
        {...(asChild ? {} : { type: 'button' })}
        {...props}
      >
        {children}
      </Comp>
    );
  }
);
Button.displayName = 'Button';

export { Button, buttonVariants };
```

---

### 9. ç§»é™¤é‡å¤çš„CSSå®šä¹‰

**æ–‡ä»¶ä½ç½®**: `frontend/src/styles/globals.css`

**é‡å¤çš„åŠ¨ç”»**:
- `fade-in-up`ï¼ˆç¬¬197è¡Œå’Œkeyframesä¸­ï¼‰
- `gradient-move`ï¼ˆç¬¬124è¡Œå’Œkeyframesä¸­ï¼‰
- `glass-float`ï¼ˆç¬¬137è¡Œå’Œkeyframesä¸­ï¼‰

**å»ºè®®**:
åªä¿ç•™ä¸€å¤„å®šä¹‰ï¼Œé¿å…å†²çªã€‚

---

## ğŸ”§ å®æ–½æ­¥éª¤

### æ­¥éª¤1: ä¿®å¤ä¸¥é‡é”™è¯¯ï¼ˆå¿…é¡»ï¼‰

1. æ›´æ–°`tailwind.config.js` - æ¸…ç†é‡å¤å®šä¹‰
2. ä¿®å¤`animated-theme-toggler.tsx` - æ·»åŠ View Transitionså…¼å®¹æ€§æ£€æŸ¥
3. ç¡®ä¿æ‰€æœ‰glassç±»æ­£ç¡®å®šä¹‰
4. ä¼˜åŒ–ä¸»é¢˜åˆå§‹åŒ–é€»è¾‘

### æ­¥éª¤2: æ¸…ç†è­¦å‘Šé—®é¢˜ï¼ˆå»ºè®®ï¼‰

5. ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥
6. ç»Ÿä¸€ä¸»é¢˜åˆ‡æ¢ç»„ä»¶
7. æ›´æ–°CSSå˜é‡ä½¿ç”¨

### æ­¥éª¤3: æ€§èƒ½ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰

8. ä¼˜åŒ–æŒ‰é’®æ¶Ÿæ¼ªæ•ˆæœ
9. æ¸…ç†é‡å¤CSSå®šä¹‰
10. æ·»åŠ React.memoä¼˜åŒ–

---

## ğŸ“Š éªŒè¯æ¸…å•

- [ ] ä¸»é¢˜åˆ‡æ¢åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­æ­£å¸¸å·¥ä½œ
- [ ] æ²¡æœ‰æ§åˆ¶å°é”™è¯¯æˆ–è­¦å‘Š
- [ ] é¡µé¢åŠ è½½æ—¶æ²¡æœ‰é—ªçƒ
- [ ] Tailwindé…ç½®æ²¡æœ‰é‡å¤å®šä¹‰
- [ ] æ‰€æœ‰glassæ•ˆæœæ­£ç¡®æ˜¾ç¤º
- [ ] æŒ‰é’®åŠ¨ç”»æµç•…
- [ ] ä¸»é¢˜åœ¨åˆ·æ–°åä¿æŒ
- [ ] å“åº”å¼è®¾è®¡æ­£å¸¸

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æµè§ˆå™¨å…¼å®¹æ€§**: View Transitions APIéœ€è¦Chrome 111+ï¼Œç¡®ä¿æä¾›fallbackæ–¹æ¡ˆ
2. **æ€§èƒ½è€ƒè™‘**: å¤§é‡åŠ¨ç”»å¯èƒ½å½±å“æ€§èƒ½ï¼Œå»ºè®®ä½¿ç”¨`will-change`å’ŒGPUåŠ é€Ÿ
3. **æµ‹è¯•è¦†ç›–**: åœ¨ä¿®å¤åè¿›è¡Œå…¨é¢çš„è·¨æµè§ˆå™¨æµ‹è¯•
4. **å¤‡ä»½**: åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶å‰å…ˆå¤‡ä»½

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

å®Œæˆä»¥ä¸Šä¿®å¤åï¼š
- âŒ ä¸»é¢˜åˆ‡æ¢é”™è¯¯ â†’ âœ… æ­£å¸¸å·¥ä½œ
- âŒ æ§åˆ¶å°è­¦å‘Š â†’ âœ… æ— è­¦å‘Š
- âŒ é¡µé¢é—ªçƒ â†’ âœ… å¹³æ»‘è¿‡æ¸¡
- âŒ æ ·å¼å†²çª â†’ âœ… ä¸€è‡´æ€§è®¾è®¡
- âŒ æ€§èƒ½é—®é¢˜ â†’ âœ… æµç•…åŠ¨ç”»

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2026-01-25  
**ç»´æŠ¤è€…**: AI Assistant
