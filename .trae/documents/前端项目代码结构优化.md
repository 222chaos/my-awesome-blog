## 前端项目优化方案

经过分析，发现以下可以优化的地方：

### 1. 统一 Service 层 API 调用模式
**问题**: 不同服务使用不同的 API 调用方式，不一致且重复
- `articleService.ts` 有自定义 `apiRequest` 函数
- `messageService.ts` 也有自定义 `apiRequest` 函数
- 其他服务直接使用 `fetch` + 内联 token 处理

**优化**: 创建统一的 API 客户端服务
- 创建 `frontend/src/lib/api-client.ts` 统一 API 请求逻辑
- 所有 service 文件使用统一的 API 客户端
- 集中处理认证 token、错误处理、请求重试

### 2. 修复 albumService.ts 端点错误
**问题**: `albumService.ts` 仍使用旧的 `/portfolios` 端点
- 应该使用新的 `/albums` 端点（我们刚创建的）

**优化**: 更新 `albumService.ts` 中的所有端点
- `/portfolios` → `/albums`
- `/portfolios?featured=true` → `/albums/featured/list`
- `/portfolios/${id}` → `/albums/${id}`

### 3. 清理 userService.ts 的 Mock 数据
**问题**: `userService.ts` 包含模拟数据和延迟函数，与真实后端 API 冲突
- `getUserProfile`, `updateUserProfile`, `uploadAvatar` 都是模拟的
- `loginUser` 调用真实的 `loginApi` 但也包含模拟逻辑

**优化**: 
- 删除所有 mock 数据和 `delay` 函数
- 让所有函数直接调用 `lib/api/auth.ts` 中的真实 API
- 或者考虑完全移除 `userService.ts`，直接使用 `lib/api/auth.ts`

### 4. 统一 Token 存储键名
**问题**: 不同服务使用不同的 token 键名
- `messageService.ts`: `auth_token`
- 其他服务: `access_token`
- `lib/api/auth.ts`: `auth_token`

**优化**: 
- 统一使用 `auth_token` 作为标准键名
- 在 `lib/auth-utils.ts` 中创建统一的 token 管理函数

### 5. 合并类型定义
**问题**: 类型定义分散在多个文件中
- `types/index.ts` 有主类型定义
- 各 service 文件中也有自己的类型定义

**优化**:
- 保持 `types/index.ts` 作为唯一的类型定义来源
- 从 service 文件中移除重复的类型定义
- 所有 service 文件从 `@/types` 导入类型

### 6. 统一 API_BASE_URL 配置
**问题**: URL 拼接不一致
- `articleService.ts`: `${API_BASE_URL}/api/v1/articles/` (重复前缀)
- 其他服务: `${API_BASE_URL}/endpoint`

**优化**:
- 在 `config/api.ts` 中定义每个资源的端点路径
- 或者统一在 service 层只使用 `${API_BASE_URL}/resource`

### 实施计划

**优先级 1 (高 - 影响功能)**:
1. 修复 `albumService.ts` 端点错误
2. 清理 `userService.ts` 的 mock 数据

**优先级 2 (中 - 提升代码质量)**:
3. 创建统一的 API 客户端服务
4. 统一 Token 存储键名
5. 合并类型定义到 `types/index.ts`

**优先级 3 (低 - 代码整洁)**:
6. 统一 API URL 拼接模式

**预期效果**:
- 代码更易维护和扩展
- 减少重复代码
- 统一错误处理
- 修复所有 API 端点问题