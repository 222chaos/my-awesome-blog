## 完善模型对话页面 (LLM Chat) 设计与实现计划

### 🎨 设计理念
- **风格**: Mac OS 风格 + Cyberpunk/Futuristic 前卫感
- **核心元素**: 
  - **玻璃拟态 (Glassmorphism)**: 侧边栏和输入区域使用高斯模糊和半透明背景。
  - **流体渐变**: 背景使用流动的极光渐变动画。
  - **圆角与阴影**: 大圆角 (Rounded-2xl/3xl) 和细腻的弥散阴影。
  - **排版**: 针对中文优化的排版，清晰的层级。
- **交互**: 流畅的进出场动画，打字机流式输出效果。

### 🛠 技术实现方案

#### 1. 目录结构规划
```
frontend/src/
  app/
    chat/
      page.tsx          # 聊天页面主入口
  components/
    chat/
      ChatLayout.tsx    # 整体布局 (Sidebar + Main)
      ChatSidebar.tsx   # 侧边栏 (历史记录, 设置)
      ChatWindow.tsx    # 消息显示区域
      MessageBubble.tsx # 单条消息气泡 (Markdown 渲染)
      ChatInput.tsx     # 底部输入框
      ModelSelector.tsx # 模型选择器
```

#### 2. 组件详细设计

**A. ChatLayout (布局)**
- 全屏 Flex 布局。
- 背景：深色底色 + CSS 动画渐变光晕。
- 响应式：移动端隐藏侧边栏（抽屉式）。

**B. ChatSidebar (侧边栏)**
- 样式：Mac 风格侧边栏，深色磨砂玻璃 (`backdrop-blur-xl`, `bg-black/40`)。
- 功能：
  - "新对话" 按钮：高亮渐变色。
  - 历史记录列表：本地存储 (localStorage) 实现。
  - 底部用户信息/设置。

**C. ChatWindow (主窗口)**
- 顶部 Header：模型选择器 (Dropdown)，清除对话按钮。
- 消息流：
  - **User**: 右侧，渐变色背景气泡，白色文字。
  - **AI**: 左侧，透明背景，打字机效果，支持 Markdown (表格、列表、粗体)。
  - 代码块：由于缺少 `react-syntax-highlighter`，将使用自定义 CSS 美化 `<pre><code>` 标签，实现类似 Mac 终端的深色代码块样式。

**D. ChatInput (输入区域)**
- 底部悬浮，最大宽度限制。
- 样式：大圆角胶囊状，磨砂玻璃背景。
- 功能：自动增高文本框，发送按钮（图标）。

#### 3. 逻辑实现 (useChat Hook)
- **状态管理**: `messages` (数组), `input` (字符串), `isLoading` (布尔值), `currentModel` (字符串)。
- **流式处理**: 
  - 调用 `streamChat` API。
  - 解析 SSE 数据流，实时更新最后一条 AI 消息的内容。
- **本地存储**: 将对话记录保存在 `localStorage` 中，以便刷新后恢复。

#### 4. 依赖处理
- 使用已有的 `react-markdown`, `lucide-react`, `framer-motion`。
- 手动实现简单的代码块样式替代缺失的高亮库。

### 📅 执行步骤
1.  **创建组件文件**: 按结构创建所有组件的基础代码。
2.  **实现样式**: 编写 Tailwind CSS 样式，实现 Mac + 前卫风格。
3.  **接入 API**: 在 `ChatWindow` 中集成 `streamChat` 接口。
4.  **优化交互**: 添加 Framer Motion 动画。
5.  **添加路由**: 确保可以通过 `/chat` 访问。

### ✅ 预期效果
用户进入 `/chat` 页面，看到一个极具现代感和科技感的聊天界面。可以输入中文与 AI 对话，AI 的回复以打字机效果流畅呈现，支持 Markdown 格式。界面操作符合 Mac 用户习惯，视觉体验大胆独特。