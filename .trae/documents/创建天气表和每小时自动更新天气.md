## 创建天气表和定时更新任务

### 实现计划

#### 1. 创建天气数据库模型 (`app/models/weather.py`)
- 字段包括：城市、温度、天气状况、湿度、风速、气压、更新时间等
- 添加索引优化查询
- 支持多城市天气记录

#### 2. 创建天气 CRUD 操作 (`app/crud/weather.py`)
- 创建/更新天气记录
- 获取最新天气（按城市）
- 获取历史天气记录
- 按时间范围查询

#### 3. 添加 APScheduler 依赖 (`requirements.txt`)
- 添加 `apscheduler==3.10.4` 用于定时任务

#### 4. 创建天气更新服务 (`app/services/weather_update_service.py`)
- 定时任务逻辑
- 每小时更新指定城市（杭州）的天气
- 调用 ALAPI 获取数据
- 存储到数据库

#### 5. 修改 main.py
- 初始化调度器
- 启动时启动定时任务
- 关闭时停止调度器

#### 6. 更新数据库迁移
- 生成并应用新的 weather 表迁移

### 定时任务配置
- 默认城市：杭州
- 更新频率：每小时（cron: 0 * * * *）
- 任务启动：应用启动后立即执行一次，然后每小时执行