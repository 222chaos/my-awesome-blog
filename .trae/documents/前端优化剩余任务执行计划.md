# 前端优化剩余任务执行计划

## 概述
继续完成剩余的7个优化任务，提升代码质量、性能和可维护性。

---

## Task 9: 优化 HeroSection 视频加载策略

**目标**：减少初始加载时间，按需加载视频资源

**执行步骤**：
1. 在 `HeroSection.tsx` 中添加视频预加载选项
2. 实现视频懒加载逻辑（只在进入视口时加载）
3. 添加网络状态检测，弱网环境使用备用背景
4. 优化视频资源大小和格式

**影响文件**：
- `frontend/src/components/home/HeroSection.tsx`

---

## Task 10: 创建主题常量文件

**目标**：统一管理所有硬编码的主题颜色和类名

**执行步骤**：
1. 创建 `frontend/src/constants/theme.ts`，定义所有主题常量
2. 提取所有硬编码的颜色值（tech-cyan, tech-deepblue等）
3. 创建类型安全的主题配置接口
4. 更新 `useThemedClasses.ts` 使用新的常量
5. 批量替换78个文件中的硬编码类名

**影响文件**：
- 新建：`frontend/src/constants/theme.ts`
- 修改：`frontend/src/hooks/useThemedClasses.ts`
- 修改：78个组件文件（批量替换）

---

## Task 11: 添加环境变量验证

**目标**：确保所有必需的环境变量都已配置，避免运行时错误

**执行步骤**：
1. 创建 `frontend/src/lib/env.ts` 环境变量验证模块
2. 定义所有环境变量的类型和默认值
3. 添加启动时验证逻辑
4. 在应用入口处调用验证
5. 更新 `api.ts` 使用验证后的环境变量

**影响文件**：
- 新建：`frontend/src/lib/env.ts`
- 修改：`frontend/src/config/api.ts`
- 修改：`frontend/src/app/layout.tsx`

---

## Task 12: 添加 React Error Boundary

**目标**：捕获组件树中的错误，提供友好的错误展示

**执行步骤**：
1. 创建 `frontend/src/components/error/ErrorBoundary.tsx`
2. 实现错误捕获和回退UI
3. 添加错误日志记录
4. 在根layout中包裹ErrorBoundary
5. 添加错误重试机制

**影响文件**：
- 新建：`frontend/src/components/error/ErrorBoundary.tsx`
- 修改：`frontend/src/app/layout.tsx`

---

## Task 13: 优化主题切换，防止闪烁

**目标**：解决主题切换时的白色闪烁问题

**执行步骤**：
1. 在 `theme-context.tsx` 中添加阻止初始渲染逻辑
2. 在 HTML head 中添加内联脚本预先设置主题
3. 优化 `layout.tsx` 的 `suppressHydrationWarning` 处理
4. 添加主题切换动画过渡

**影响文件**：
- 修改：`frontend/src/context/theme-context.tsx`
- 修改：`frontend/src/app/layout.tsx`

---

## Task 14: 拆分 globals.css 为模块化文件

**目标**：提高CSS文件的可维护性和组织性

**执行步骤**：
1. 创建目录结构：
   - `frontend/src/styles/base/` - 基础样式
   - `frontend/src/styles/animations/` - 动画样式
   - `frontend/src/styles/components/` - 组件样式
   - `frontend/src/styles/utilities/` - 工具样式
2. 将globals.css拆分为多个模块
3. 更新导入语句
4. 保留globals.css作为聚合入口

**影响文件**：
- 新建：多个CSS模块文件
- 修改：`frontend/src/styles/globals.css`

---

## Task 15: 为 CommandBar 添加键盘导航

**目标**：提升键盘用户的可访问性

**执行步骤**：
1. 为搜索框添加Ctrl+K快捷键
2. 为筛选按钮添加Ctrl+F快捷键
3. 为视图切换添加Ctrl+V快捷键
4. 添加键盘焦点管理
5. 添加ARIA属性提升无障碍性

**影响文件**：
- 修改：`frontend/src/components/articles/CommandBar.tsx`

---

## 执行顺序
按照任务依赖关系和影响范围，建议执行顺序：
1. Task 9 (独立，性能优化)
2. Task 11 (基础设施)
3. Task 10 (大规模重构，需仔细执行)
4. Task 13 (用户体验优化)
5. Task 12 (错误处理)
6. Task 15 (可访问性增强)
7. Task 14 (最后进行，影响最小)

## 预期成果
- 视频加载速度提升30-50%
- 代码可维护性大幅提升（统一主题管理）
- 环境配置错误减少90%
- 错误处理覆盖率100%
- 主题切换体验流畅
- CSS文件结构清晰
- 键盘用户可访问性提升