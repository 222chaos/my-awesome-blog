# 修复主题初始化导致的颜色闪烁问题

## 根本原因分析

问题出在 `theme-context.tsx` 中的 `resolvedTheme` 初始化逻辑：

**当前问题：**
1. `resolvedTheme` 初始值可能在第一次渲染时不正确
2. `useThemedClasses` 依赖 `resolvedTheme`，会在渲染时立即获取值
3. `ThemeProvider` 的 `useEffect` 在渲染后才更新 `resolvedTheme`
4. 导致第一次渲染使用错误的主题颜色，第二次渲染才正确

**具体场景：**
- 如果系统是浅色模式，但 `resolvedTheme` 初始化为 'dark'
- 第一次渲染：文字显示为白色（dark 模式）
- useEffect 执行后：resolvedTheme 更新为 'light'
- 第二次渲染：文字变成黑色（light 模式）

## 解决方案

**修改 `theme-context.tsx` 的 `resolvedTheme` 初始化逻辑**

在 `resolvedTheme` 初始化时直接同步读取正确的主题值，而不是依赖 `useEffect`：

1. 检查 localStorage 的 `theme` 值
2. 如果是 'light' 或 'dark'，直接使用
3. 如果是 'auto' 或不存在，立即读取系统偏好
4. 确保 `resolvedTheme` 初始值就是正确的

这样第一次渲染时主题就是正确的，不会有闪烁。